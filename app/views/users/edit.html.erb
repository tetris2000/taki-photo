<div class="text-center mb-4">
  <h1>ユーザー設定</h1>
</div>
  
<div class="row">
  <div class="col-xl-6 col-lg-8 offset-xl-3 offset-lg-2">
     
    <%= form_with(model: @user, local: true) do |f| %>
    <%= render "layouts/error_messages", model: f.object %>
      
      <div class="text-center mb-4">
        <div id="default_field">
          <%= cl_image_tag(@user.icon_photo, :width=>200, :height=>200, :gravity=>"auto", :crop=>"fill", :alt=>"icon") %>
        </div>
        <div id="img_field"></div>
        <button type="button" class="btn btn-secondary btn-lg d-block mx-auto" onClick="$('#icon_preview').click()">
          アイコンを選択
        </button>
        <%= f.file_field :icon_photo, accept: "image/jpg,image/jpeg", id: "icon_preview", class: "d-none" %>
        <span class="text-secondary" style="font-size: small;">※アイコン画像は自動的に200×200pxにリサイズ・クロップされます</span>
      </div>
      
      <div class="form-group row">
        <%= f.label :name, "ユーザー名", class: "col-sm-4 col-form-label" %>
        <div class="col-sm-8">
          <%= f.text_field :name, class: "form-control" %>
          <span class="text-secondary" style="font-size: small;">※最大20文字</span>
        </div>
      </div>

      <div class="form-group row">
        <%= f.label :introduction, '紹介文', class: "col-sm-4 col-form-label" %>
        <div class="col-sm-8">
          <%= f.text_area :introduction, class: 'form-control' %>
          <span class="text-secondary" style="font-size: small;">※最大255文字</span>
        </div>
      </div>
      
      <div class="form-group row">
        <%= f.label :email, 'メールアドレス', class: "col-sm-4 col-form-label" %>
        <div class="col-sm-8">
          <%= f.email_field :email, class: 'form-control mb-4' %>
        </div>
      </div>
      
      <div class="form-group row">
        <%= f.label :password, 'パスワード', class: "col-sm-4 col-form-label" %>
        <div class="col-sm-8">
          <%= f.password_field :password, class: 'form-control' %>
          <span class="text-secondary" style="font-size: small;">※半角英数字8文字以上<span>
        </div>
      </div>

      <div class="form-group row">
        <%= f.label :password_confirmation, 'パスワード（再入力）', class: "col-sm-4 col-form-label" %>
        <div class="col-sm-8">
          <%= f.password_field :password_confirmation, class: 'form-control mb-4' %>
        </div>
      </div>
      
      <div class="text-center mb-4">
        <%= f.submit '変更内容を保存', class: 'btn btn-primary btn-lg mr-1' %>
        <%= link_to "キャンセル", @user, class: "btn btn-light btn-lg ml-1" %>
      </div>
      
      <p class="text-center" style="font-size: small">アカウントを削除したい方は<%= link_to "こちら", delete_path(@user) %></p>
    <% end %>
  </div>
</div>